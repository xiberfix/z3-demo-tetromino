(this["webpackJsonpz3-demo-tetromino"]=this["webpackJsonpz3-demo-tetromino"]||[]).push([[0],{15:function(e,c,t){},16:function(e,c,t){},19:function(e,c,t){"use strict";t.r(c);var n=t(0),r=t(1),o=t.n(r),a=t(9),s=t.n(a),l=(t(15),t(2)),i=(t(16),t(5)),u=t(8),j=t(3),f=t.n(j),b=f.a.mark(h),d=30;function h(e){var c,t;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=0;case 1:if(!(c<e)){n.next=12;break}t=0;case 3:if(!(t<e)){n.next=9;break}return n.next=6,{col:c,row:t};case 6:t++,n.next=3;break;case 9:c++,n.next=1;break;case 12:case"end":return n.stop()}}),b)}var p=function(e){var c=e.n,t=e.excluded,r=e.shapes,o=e.toggle,a=function(e){return e.col+e.row*c},s=new Set(t.map(a));return console.log(s),Object(n.jsx)("svg",{width:c*d+10,height:c*d+10,children:Object(n.jsxs)("g",{transform:"translate(5,5)",children:[Array.from(h(c)).map((function(e){return Object(n.jsx)(m,{p:e,block:s.has(a(e)),onClick:function(){return o(e)}})})),r.map((function(e){return Object(n.jsx)(x,{p:e.p,k:e.k})}))]})})},m=function(e){var c=e.p,t=e.block,r=Object(u.a)(e,["p","block"]);return Object(n.jsx)("rect",Object(i.a)({x:c.col*d,y:c.row*d,width:d,height:d,className:t?"cell-block":"cell-empty"},r))},O=[function(e){return"M 0 0 v ".concat(-e," h ").concat(e," v ").concat(-e," h ").concat(e," v ").concat(2*e," h ").concat(-e," v ").concat(e," h ").concat(-e," v ").concat(-e)},function(e){return"M 0 0 h ".concat(e," v ").concat(-e," h ").concat(2*e," v ").concat(e," h ").concat(-e," v ").concat(e," h ").concat(-2*e," v ").concat(-e)},function(e){return"M 0 0 h ".concat(2*e," v ").concat(e," h ").concat(e," v ").concat(e," h ").concat(-2*e," v ").concat(-e," h ").concat(-e," v ").concat(-e)},function(e){return"M 0 0 h ".concat(e," v ").concat(e," h ").concat(e," v ").concat(2*e," h ").concat(-e," v ").concat(-e," h ").concat(-e," v ").concat(-2*e)}],x=function(e){var c=e.p,t=e.k,r=O[t-1],o="translate(".concat(c.col*d,",").concat(c.row*d,")");return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("path",{d:r(d),transform:o,className:"shape"}),Object(n.jsx)("circle",{r:3,cx:c.col*d+15,cy:c.row*d+15,className:"mark"})]})},v=function(e){var c=e.p,t=e.k,r=Object(u.a)(e,["p","k"]),o="translate(".concat(5,",",5,")");return Object(n.jsx)("svg",Object(i.a)(Object(i.a)({width:100,height:100},r),{},{children:Object(n.jsx)("g",{transform:o,children:Object(n.jsx)(x,{p:c,k:t})})}))},w=function(){return Object(n.jsxs)("div",{className:"d-flex flex-row",children:[Object(n.jsx)(v,{p:{col:1,row:2},k:1,className:"m-2"}),Object(n.jsx)(v,{p:{col:0,row:2},k:2,className:"m-2"}),Object(n.jsx)(v,{p:{col:0,row:1},k:3,className:"m-2"}),Object(n.jsx)(v,{p:{col:0,row:0},k:4,className:"m-2"})]})},g=t(7),k=[[],[{row:0,col:0},{row:-1,col:0},{row:-1,col:1},{row:-2,col:1}],[{row:0,col:0},{row:0,col:1},{row:-1,col:1},{row:-1,col:2}],[{row:0,col:0},{row:0,col:1},{row:1,col:1},{row:1,col:2}],[{row:0,col:0},{row:1,col:0},{row:1,col:1},{row:2,col:1}]],S=[1,2,3,4],y=function(e){return k[e.k].map((function(c){return t=c,n=e.p,{col:t.col+n.col,row:t.row+n.row};var t,n}))},N=function(e,c){var t,n,r=f.a.mark(p),o=function(c){return c.col+e*c.row},a=new Set(c.map(o)),s=Array.from(h(e)).flatMap((function(e){return S.map((function(c){return{p:e,k:c}}))})).filter((function(c){return y(c).every((function(c){return function(c){return 0<=c.col&&c.col<e&&0<=c.row&&c.row<e}(c)}))})).filter((function(e){return y(e).every((function(e){return!a.has(o(e))}))})),i=function(e){return o(e.p)*S.length+e.k},u=new Map(s.map((function(e,c){return[i(e),c]}))),j=function(e){return u.get(e)+1},b=s.flatMap((function(e){return y(e).map((function(c){return[o(c),i(e)]}))})),d=(t=function(e){return e[0]},n=function(e){return e[1]},b.reduce((function(e,c){var r=t(c);return e.has(r)||e.set(r,[]),e.get(r).push(n(c)),e}),new Map));function p(e){var c,t;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=0;case 1:if(!(c<e.length)){n.next=12;break}t=c+1;case 3:if(!(t<e.length)){n.next=9;break}return n.next=6,[-j(e[c]),-j(e[t])];case 6:t++,n.next=3;break;case 9:c++,n.next=1;break;case 12:case"end":return n.stop()}}),r)}var m,O=[],x=Object(g.a)(d);try{for(x.s();!(m=x.n()).done;){var v=Object(l.a)(m.value,2),w=(v[0],v[1]);O.push(w.map(j));var k,N=Object(g.a)(p(w));try{for(N.s();!(k=N.n()).done;){var M=k.value;O.push(M)}}catch(A){N.e(A)}finally{N.f()}}}catch(A){x.e(A)}finally{x.f()}return{placements:s,clauses:O}},M="VERIFY",A="PROGRESS",C="READY",E="STDOUT",R="STDERR";var I=function(){var e=Object(r.useState)(""),c=Object(l.a)(e,2),t=c[0],o=c[1],a=Object(r.useState)(),s=Object(l.a)(a,2),i=s[0],u=s[1],j=Object(r.useState)(),f=Object(l.a)(j,2),b=f[0],d=f[1];function h(e){console.info("Z3 \u2192 [Window]:",e);var c=e.data.kind,t=e.data.payload;switch(c){case A:console.log(t,"progress"),o("Z3 is loading...");break;case C:console.log("ready"),o("Z3 is ready");break;case E:if(console.log(t,"stdout-msg"),"sat"===t||"unsat"===t)v(!0),J("sat"===t);else{var n=function(e,c){var t=c.trim().split(" ").map((function(e){return parseInt(e)-1})).filter((function(e){return e>=0}));console.log(t);var n=new Set(t);return e.placements.filter((function(e,c){return n.has(c)}))}(b,t);console.log(n),G(n)}break;case R:console.log(t,"stderr-msg")}}Object(r.useEffect)((function(){var e=new window.Worker("worker.js");u(e)}),[]),Object(r.useEffect)((function(){i&&(i.onmessage=h)}),[i,h]);var m=Object(r.useState)(!1),O=Object(l.a)(m,2),x=O[0],v=O[1],g=Object(r.useState)(4),k=Object(l.a)(g,2),S=k[0],y=k[1],I=Object(r.useState)([{row:0,col:0},{row:0,col:3},{row:1,col:0},{row:3,col:3}]),T=Object(l.a)(I,2),Z=T[0],z=T[1],W=Object(r.useState)(!1),D=Object(l.a)(W,2),F=D[0],J=D[1],U=Object(r.useState)([]),Y=Object(l.a)(U,2),B=Y[0],G=Y[1],P=function(){v(!1),G([])};return Object(n.jsxs)("div",{id:"app",className:"d-flex flex-column justify-content-start align-items-center m-3",children:[Object(n.jsx)("div",{children:Object(n.jsxs)("ol",{children:[Object(n.jsx)("li",{children:"Wait for Z3 to load..."}),Object(n.jsx)("li",{children:"Select a grid size"}),Object(n.jsx)("li",{children:"Click on a cell to include/exclude it"}),Object(n.jsx)("li",{children:"Solve to see possible arrangement"})]})}),Object(n.jsxs)("div",{className:"d-flex flex-row",children:[Object(n.jsx)("span",{className:"m-2",children:"Size:"}),Object(n.jsx)("input",{className:"m-2",type:"range",min:3,max:20,value:S,onChange:function(e){return y(parseInt(e.target.value))}}),Object(n.jsx)("strong",{className:"m-2",children:S})]}),Object(n.jsxs)("div",{className:"d-flex flex-row",children:[!x&&Object(n.jsx)("button",{className:"btn btn-outline-primary m-2",onClick:function(){var e=N(S,Z);console.log(e);var c,t,n=function(e){return"p cnf ".concat(e.placements.length+1," ").concat(e.clauses.length,"\n")+e.clauses.map((function(e){return e.join(" ")+" 0"})).join("\n")}(e);d(e),c=M,t={args:[],input:n},console.info("[Window] \u2192 Z3 ("+c+"):",t),i.postMessage({kind:c,payload:t})},children:"Solve"}),x&&Object(n.jsx)("button",{className:"btn btn-outline-danger m-2",onClick:P,children:"Reset"}),Object(n.jsx)("button",{className:"btn btn-outline-secondary m-2",onClick:function(){P(),z([])},children:"Clear"})]}),Object(n.jsx)("p",{className:"m-1",children:Object(n.jsx)("em",{children:t})}),Object(n.jsxs)("p",{className:"m-1",children:[!x&&Object(n.jsx)("span",{children:"click solve"}),x&&Object(n.jsx)("strong",{children:F?"SAT \u2705":"UNSAT \ud83e\udd37\u200d\u2642\ufe0f"})]}),Object(n.jsx)(p,{n:S,excluded:Z,shapes:B,toggle:function(e){var c=Z.findIndex((function(c){return c.col===e.col&&c.row===e.row}));-1===c?Z.splice(-1,0,e):Z.splice(c,1),z(Array.from(Z))}}),Object(n.jsx)("p",{children:"Available Shapes:"}),Object(n.jsx)(w,{})]})};t(18);s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(I,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.a36ce983.chunk.js.map