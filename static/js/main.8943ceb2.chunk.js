(this["webpackJsonpz3-demo-tetromino"]=this["webpackJsonpz3-demo-tetromino"]||[]).push([[0],{15:function(c,e,t){},16:function(c,e,t){},19:function(c,e,t){"use strict";t.r(e);var n=t(0),o=t(1),r=t.n(o),a=t(9),l=t.n(a),s=(t(15),t(2)),i=(t(16),t(5)),u=t(8),j=t(3),b=t.n(j),f=b.a.mark(d),w=30;function d(c){var e,t;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=0;case 1:if(!(e<c)){n.next=12;break}t=0;case 3:if(!(t<c)){n.next=9;break}return n.next=6,{col:e,row:t};case 6:t++,n.next=3;break;case 9:e++,n.next=1;break;case 12:case"end":return n.stop()}}),f)}var h=function(c){var e=c.n,t=c.excluded,o=c.shapes,r=c.toggle,a=function(c){return c.col+c.row*e},l=new Set(t.map(a));return console.log(l),Object(n.jsx)("svg",{width:e*w+10,height:e*w+10,children:Object(n.jsxs)("g",{transform:"translate(5,5)",children:[Array.from(d(e)).map((function(c){return Object(n.jsx)(m,{p:c,block:l.has(a(c)),onClick:function(){return r(c)}})})),o.map((function(c){return Object(n.jsx)(O,{p:c.p,k:c.k})}))]})})},m=function(c){var e=c.p,t=c.block,o=Object(u.a)(c,["p","block"]);return Object(n.jsx)("rect",Object(i.a)({x:e.col*w,y:e.row*w,width:w,height:w,className:t?"cell-block":"cell-empty"},o))},p=[function(c){return"M 0 0 v ".concat(-c," h ").concat(c," v ").concat(-c," h ").concat(c," v ").concat(2*c," h ").concat(-c," v ").concat(c," h ").concat(-c," v ").concat(-c)},function(c){return"M 0 0 h ".concat(c," v ").concat(-c," h ").concat(2*c," v ").concat(c," h ").concat(-c," v ").concat(c," h ").concat(-2*c," v ").concat(-c)},function(c){return"M 0 0 h ".concat(2*c," v ").concat(c," h ").concat(c," v ").concat(c," h ").concat(-2*c," v ").concat(-c," h ").concat(-c," v ").concat(-c)},function(c){return"M 0 0 h ".concat(c," v ").concat(c," h ").concat(c," v ").concat(2*c," h ").concat(-c," v ").concat(-c," h ").concat(-c," v ").concat(-2*c)}],O=function(c){var e=c.p,t=c.k,o=p[t-1],r="translate(".concat(e.col*w,",").concat(e.row*w,")");return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("path",{d:o(w),transform:r,className:"shape"}),Object(n.jsx)("circle",{r:3,cx:e.col*w+15,cy:e.row*w+15,className:"mark"})]})},x=function(c){var e=c.p,t=c.k,o=Object(u.a)(c,["p","k"]),r="translate(".concat(5,",",5,")");return Object(n.jsx)("svg",Object(i.a)(Object(i.a)({width:100,height:100},o),{},{children:Object(n.jsx)("g",{transform:r,children:Object(n.jsx)(O,{p:e,k:t})})}))},v=function(){return Object(n.jsxs)("div",{className:"d-flex flex-row",children:[Object(n.jsx)(x,{p:{col:1,row:2},k:1,className:"m-2"}),Object(n.jsx)(x,{p:{col:0,row:2},k:2,className:"m-2"}),Object(n.jsx)(x,{p:{col:0,row:1},k:3,className:"m-2"}),Object(n.jsx)(x,{p:{col:0,row:0},k:4,className:"m-2"})]})},g=t(7),k=[[],[{row:0,col:0},{row:-1,col:0},{row:-1,col:1},{row:-2,col:1}],[{row:0,col:0},{row:0,col:1},{row:-1,col:1},{row:-1,col:2}],[{row:0,col:0},{row:0,col:1},{row:1,col:1},{row:1,col:2}],[{row:0,col:0},{row:1,col:0},{row:1,col:1},{row:2,col:1}]],S=[1,2,3,4],y=function(c){return k[c.k].map((function(e){return t=e,n=c.p,{col:t.col+n.col,row:t.row+n.row};var t,n}))},N=function(c,e){var t,n,o=b.a.mark(h),r=function(e){return e.col+c*e.row},a=new Set(e.map(r)),l=Array.from(d(c)).flatMap((function(c){return S.map((function(e){return{p:c,k:e}}))})).filter((function(e){return y(e).every((function(e){return function(e){return 0<=e.col&&e.col<c&&0<=e.row&&e.row<c}(e)}))})).filter((function(c){return y(c).every((function(c){return!a.has(r(c))}))})),i=function(c){return r(c.p)*S.length+c.k},u=new Map(l.map((function(c,e){return[i(c),e]}))),j=function(c){return u.get(c)+1},f=l.flatMap((function(c){return y(c).map((function(e){return[r(e),i(c)]}))})),w=(t=function(c){return c[0]},n=function(c){return c[1]},f.reduce((function(c,e){var o=t(e);return c.has(o)||c.set(o,[]),c.get(o).push(n(e)),c}),new Map));function h(c){var e,t;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=0;case 1:if(!(e<c.length)){n.next=12;break}t=e+1;case 3:if(!(t<c.length)){n.next=9;break}return n.next=6,[-j(c[e]),-j(c[t])];case 6:t++,n.next=3;break;case 9:e++,n.next=1;break;case 12:case"end":return n.stop()}}),o)}var m,p=[],O=Object(g.a)(w);try{for(O.s();!(m=O.n()).done;){var x=Object(s.a)(m.value,2),v=(x[0],x[1]);p.push(v.map(j));var k,N=Object(g.a)(h(v));try{for(N.s();!(k=N.n()).done;){var M=k.value;p.push(M)}}catch(C){N.e(C)}finally{N.f()}}}catch(C){O.e(C)}finally{O.f()}return{placements:l,clauses:p}},M="VERIFY",C="PROGRESS",A="READY",E="STDOUT",R="STDERR",I=[[],[],[],[{row:0,col:0},{row:0,col:1},{row:0,col:2},{row:2,col:0},{row:1,col:2}],[{row:0,col:0},{row:0,col:3},{row:1,col:0},{row:3,col:3}],[{row:0,col:0},{row:2,col:0},{row:2,col:1},{row:2,col:2},{row:3,col:0},{row:3,col:4},{row:4,col:0},{row:4,col:1},{row:4,col:4}],[{row:0,col:0},{row:2,col:5},{row:5,col:0},{row:5,col:5},{row:4,col:2},{row:4,col:3},{row:5,col:2},{row:5,col:3}]];var T=function(){var c=Object(o.useState)(""),e=Object(s.a)(c,2),t=e[0],r=e[1],a=Object(o.useState)(),l=Object(s.a)(a,2),i=l[0],u=l[1],j=Object(o.useState)(),b=Object(s.a)(j,2),f=b[0],w=b[1];function d(c){console.info("Z3 \u2192 [Window]:",c);var e=c.data.kind,t=c.data.payload;switch(e){case C:console.log(t,"progress"),r("Z3 is loading...");break;case A:console.log("ready"),r("Z3 is ready");break;case E:if(console.log(t,"stdout-msg"),"sat"===t||"unsat"===t)x(!0),U("sat"===t);else{var n=function(c,e){var t=e.trim().split(" ").map((function(c){return parseInt(c)-1})).filter((function(c){return c>=0}));console.log(t);var n=new Set(t);return c.placements.filter((function(c,e){return n.has(e)}))}(f,t);console.log(n),P(n)}break;case R:console.log(t,"stderr-msg")}}Object(o.useEffect)((function(){var c=new window.Worker("worker.js");u(c)}),[]),Object(o.useEffect)((function(){i&&(i.onmessage=d)}),[i,d]);var m=Object(o.useState)(!1),p=Object(s.a)(m,2),O=p[0],x=p[1],g=Object(o.useState)(4),k=Object(s.a)(g,2),S=k[0],y=k[1],T=Object(o.useState)(I[4]),Z=Object(s.a)(T,2),z=Z[0],W=Z[1],D=Object(o.useState)(!1),F=Object(s.a)(D,2),J=F[0],U=F[1],Y=Object(o.useState)([]),B=Object(s.a)(Y,2),G=B[0],P=B[1],V=function(){x(!1),P([])};return Object(n.jsxs)("div",{id:"app",className:"d-flex flex-column justify-content-start align-items-center m-3",children:[Object(n.jsx)("div",{children:Object(n.jsxs)("ol",{children:[Object(n.jsx)("li",{children:"Wait for Z3 to load..."}),Object(n.jsx)("li",{children:"Select a grid size"}),Object(n.jsx)("li",{children:"Click on a cell to include/exclude it"}),Object(n.jsx)("li",{children:"Solve to see possible arrangement"})]})}),Object(n.jsxs)("div",{className:"d-flex flex-row",children:[Object(n.jsx)("span",{className:"m-2",children:"Size:"}),Object(n.jsx)("input",{className:"m-2",type:"range",min:3,max:20,value:S,onChange:function(c){return y(parseInt(c.target.value))}}),Object(n.jsx)("strong",{className:"m-2",children:S})]}),Object(n.jsxs)("div",{className:"d-flex flex-row",children:[!O&&Object(n.jsx)("button",{className:"btn btn-outline-primary m-2",onClick:function(){var c=N(S,z);console.log(c);var e,t,n=function(c){return"p cnf ".concat(c.placements.length+1," ").concat(c.clauses.length,"\n")+c.clauses.map((function(c){return c.join(" ")+" 0"})).join("\n")}(c);w(c),e=M,t={args:[],input:n},console.info("[Window] \u2192 Z3 ("+e+"):",t),i.postMessage({kind:e,payload:t})},children:"Solve"}),O&&Object(n.jsx)("button",{className:"btn btn-outline-danger m-2",onClick:V,children:"Reset"}),Object(n.jsx)("button",{className:"btn btn-outline-secondary m-2",onClick:function(){V(),W([])},children:"Clear"}),Object(n.jsx)("button",{className:"btn btn-outline-secondary m-2",onClick:function(){S<I.length&&W(I[S])},children:"Sample (3\u20136)"})]}),Object(n.jsx)("p",{className:"m-1",children:Object(n.jsx)("em",{children:t})}),Object(n.jsxs)("p",{className:"m-1",children:[!O&&Object(n.jsx)("span",{children:"click solve"}),O&&Object(n.jsx)("strong",{children:J?"SAT \u2705":"UNSAT \ud83e\udd37\u200d\u2642\ufe0f"})]}),Object(n.jsx)(h,{n:S,excluded:z,shapes:G,toggle:function(c){var e=z.findIndex((function(e){return e.col===c.col&&e.row===c.row}));-1===e?z.splice(-1,0,c):z.splice(e,1),W(Array.from(z))}}),Object(n.jsx)("p",{children:"Available Shapes:"}),Object(n.jsx)(v,{})]})};t(18);l.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(T,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.8943ceb2.chunk.js.map